{"version":3,"sources":["../../src/web/api.js"],"names":["WebApi","proxy","protocol","endpoint","accessToken","username","password","http","post","grant_type","then","res","error","Error","access_token","defaults","headers","common","Authorization","uuid","get","data","query","limit"],"mappings":"oZAEqBA,M,YACnB,WAAYC,CAAZ,CAA0C,IAAvBC,CAAAA,CAAuB,wDAAZ,UAAY,yCACxC,KAAKC,QAAL,WAAmBD,CAAnB,yBADwC,CAExC,KAAKD,KAAL,CAAaA,CAF2B,CAIxC,KAAKG,WAAL,CAAmB,IACpB,C,sFAUYC,C,CAAUC,C,CAAU,YAC/B,MAAOC,kBAAKC,IAAL,WAAa,KAAKP,KAAlB,SAA0B,KAAKE,QAA/B,kBAAwD,CAC7DM,UAAU,CAAE,UADiD,CAE7DJ,QAAQ,CAARA,CAF6D,CAG7DC,QAAQ,CAARA,CAH6D,CAAxD,EAIJI,IAJI,CAIC,SAACC,CAAD,CAAS,CACf,GAAIA,CAAG,CAACC,KAAR,CACE,KAAM,IAAIC,CAAAA,KAAJ,CAAUF,CAAG,CAACC,KAAd,CAAN,CADF,IAEWD,CAAAA,CAAG,CAACG,YAFf,GAGE,CAAI,CAACV,WAAL,CAAmBO,CAAG,CAACG,YAHzB,EAOA,MADAP,kBAAKQ,QAAL,CAAcC,OAAd,CAAsBC,MAAtB,CAA6BC,aAA7B,kBAAuD,CAAI,CAACd,WAA5D,CACA,CAAO,CAAI,CAACA,WACb,CAbM,CAcR,C,4CASSe,C,CAAM,CACd,MAAOZ,kBAAKa,GAAL,WAAY,KAAKnB,KAAjB,SAAyB,KAAKE,QAA9B,qBAAkDgB,CAAlD,GAA0DT,IAA1D,CAA+D,SAACC,CAAD,QAASA,CAAAA,CAAG,CAACU,IAAb,CAA/D,CACR,C,oDAWaC,C,CAAmB,IAAZC,CAAAA,CAAY,wDAAJ,EAAI,CAC/B,MAAOhB,kBAAKa,GAAL,WAAY,KAAKnB,KAAjB,SAAyB,KAAKE,QAA9B,4BAAyDmB,CAAzD,4BAAiFC,CAAjF,wBACJb,IADI,CACC,SAACC,CAAD,QAASA,CAAAA,CAAG,CAACU,IAAb,CADD,CAER,C","sourcesContent":["import http from '../http';\n\nexport default class WebApi {\n  constructor(proxy, protocol = 'https://') {\n    this.endpoint = `${protocol}create.kahoot.it/rest`;\n    this.proxy = proxy;\n\n    this.accessToken = null;\n  }\n\n  /**\n   * Authenticate to the web API with a username and password\n   *\n   * @param {String} username\n   * @param {String} password\n   * @returns {Promise<String>} - Access Token\n   * @memberof WebApi\n   */\n  authenticate(username, password) {\n    return http.post(`${this.proxy}${this.endpoint}/authenticate`, {\n      grant_type: 'password',\n      username,\n      password,\n    }).then((res) => {\n      if (res.error) {\n        throw new Error(res.error);\n      } else if (res.access_token) {\n        this.accessToken = res.access_token;\n      }\n\n      http.defaults.headers.common.Authorization = `Bearer ${this.accessToken}`;\n      return this.accessToken;\n    });\n  }\n\n  /**\n   * Get kahoot info by uuid\n   *\n   * @param {String} uuid\n   * @returns {Promise<Object>}\n   * @memberof WebApi\n   */\n  getKahoot(uuid) {\n    return http.get(`${this.proxy}${this.endpoint}/kahoots/${uuid}`).then((res) => res.data);\n  }\n\n\n  /**\n   * Search for kahoots by name\n   *\n   * @param {String} query\n   * @param {Number} [limit=25]\n   * @returns {Promise<Object>}\n   * @memberof WebApi\n   */\n  searchKahoots(query, limit = 25) {\n    return http.get(`${this.proxy}${this.endpoint}/kahoots/?query=${query}&cursor=0&limit=${limit}&orderBy=relevance`)\n      .then((res) => res.data);\n  }\n}\n"],"file":"api.js"}